<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>Krazy Cravings</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.css">
    <link rel="stylesheet" type="text/css" href="favourites.css">
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.css" />
    <link rel="stylesheet" type="text/css" href="../../Assets/css/common.user.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css">

    <script src="http://code.jquery.com/jquery-1.11.1.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>
    <script src="https://smtpjs.com/v3/smtp.js"></script>
    <script src="favourites.js"></script>
    <!--slider-->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
    <!--slider-->

</head>

<body>
    <div data-role="page" id="aboutuspage">

        <div data-role="header" class="mhead" style="background-color: black" data-position="fixed" data-tap-toggle="false">
            <div class="row">
                <div class="col4">
                    <a onclick="history.back()" data-position-to="window" id="accountLogo">
                        <img class="backButton" src="../../Assets/img/icons/backButton.svg">
                    </a>
                </div>
                <div class="col-7">
                    <img class="logo" src="../../Assets/img/LogoDark.png">
                </div>
                <div class="col-3">
                    <a href="../Search/index.html">
                        <img class="searchLogo" src="../../Assets/img/icons/search.png">
                    </a>
                    <a href="../UserAccount/index.html" data-position-to="window" id="accountLogo">
                        <img class="accountLogo" src="../../Assets/img/icons/usa.svg">
                    </a>

                </div>
            </div>
        </div>
        <!-- /header -->


        <!-- content -->
        <div data-role="content">
            <h1 id="header1">Favourites</h1>
            <div class="container-fluid">
                <div class="col-xs-11">
                    <form>
                        <input data-type="search" id="divOfPs-input">
                    </form>

                </div>
                <div class="col-xs-1">
                    <a href="#addItem-popup" data-rel="popup" data-position-to="window" data-transition="pop" class="addPoints"><img id="email" src="../../Assets/img/icons/send-mail.svg" alt="Email-icon"></a>

                </div>
            </div>
            <hr>

            <div class="iphone" id="iphoneDiv"></div>

            <div class="container-fluid ipad" id="ipadDiv"></div>



            <div id="empty">
                <h2 style="text-align: center;">
                    No Favourite Items!
                </h2>
            </div>

            <!-- popup success -->
            <div data-role="popup" id="add-popup-success">
                <div data-role="content">
                    <a href="#" data-rel="back" id="popupback">
                        <img src="../../Assets/img/icons/close.png" id="promo-add-btn" height="15" width="15"></a>
                    <br>
                    <center><img id="av" src="../../Assets/img/icons/orange-tick-icon.png" width="85" height="85"></center>
                    <h3 class="text-center" id="header1">Favourite list was Emailed Successfully!</h1>
                        <br>
                </div>
            </div>

            <!-- popup email deatils -->
            <div data-role="popup" id="addItem-popup">
                <div data-role="content">
                    <a href="#" data-rel="back" id="popupback"> <img src="../../Assets/img/icons/close.png" id="" height="15" width="15"></a>
                    <br>
                    <h2 class="text-center" id="header1">Share your Favourite List via Email</h2>
                    <br>
                    <center><img id="av" src="../../Assets/img/icons/send-mail.svg"></center>
                    <h4 class="text-center" id="he2"></h4>
                    <center>
                        <input type="text" name="user" id="un" value="" placeholder="Reciever's Email" data-role=none required/>
                        <p id="err" style="color: red;"></p>
                        <input type="text" name="user" id="us" value="" placeholder="Description" data-role=none required/>
                        <a href="#" data-role="button" id="submits" onclick="sendEmail()">SEND</a>
                    </center>
                </div>
            </div>

            <!-- /content -->

            <div class="footer" data-role="footer" data-position="fixed">
                <div data-role="navbar">
                    <ul>
                        <li><a href="../HomeUser/index.html" data-icon="none" class="ui-nodisc-icon ui-icon-home-inactive" id="inactive" data-ajax="false">Home</a></li>
                        <li><a href="../PastOrder/index.html" data-icon="none" class="ui-nodisc-icon ui-icon-orders-inactive" id="inactive" data-ajax="false">Orders</a></li>
                        <li><a href="../UserFavourites/index.html" data-icon="none" class="ui-nodisc-icon ui-icon-favourite-active" id="active" data-ajax="false">Favourites</a></li>
                        <li><a href="../Cart/index.html" data-icon="none" class="ui-nodisc-icon ui-icon-cart-inactive" id="inactive" data-ajax="false">Cart</a></li>

                    </ul>
                </div>
            </div>

        </div>
        <!-- /page -->
</body>

<<<<<<< HEAD
<script type="text/javascript"> 
    var buttonClick = false ;

    function sendEmail() { 
=======
<script type="text/javascript">
    var buttonClick = false;

    function sendEmail() {
>>>>>>> ba89c02 (veder page)
        var reciver = document.getElementById("un").value;
        var description = document.getElementById("us").value;
        var regex = /^([a-zA-Z0-9_\.\-\+])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;
        var mailbody = `
                            <html>
                                <h2>My Favourite Food List from Home Chef</h2>
                                <img src='../../Assets/img/cupcakes.jpg'>
                                <h2 >Cream Cakes</h2>
                                <span>No.6, Marine Drive, Colpetty</span>
                                <br>
                                <img src='../../Assets/img/kottu.jpg'>
                                <h2>Kottu Kottu</h2>
                                <span>No.4, W A Mawatha, Wellawatte</span>
                            </html>
                        `;

        if (regex.test(reciver)) {
            flag = true;
            document.getElementById("add-popup-success").style.display = "block";
            document.getElementById("err").style.display = "none";
            document.getElementById("un").value = null;
            document.getElementById("us").value = null;
<<<<<<< HEAD
            
            Email.send({ 
                Host: "smtp.gmail.com", 
                Username: "epillPod2018@gmail.com", 
                Password: "dbswepzodchmjvcc",
                To: reciver, 
                From: "epillPod2018@gmail.com", 
                Subject: description, 
                Body: mailbody, 
                Attachments : [
            {
                name : "favourites.jpg",
                path : "https://image.shutterstock.com/image-photo/large-group-junk-food-one-600w-232493077.jpg",
            }]
            }).then(function (message) { 
                //  var message = "Done"
                console.log(message)
            }); 

        }
        else
        {
            flag=false;
            document.getElementById("add-popup-success").style.display="none";
            document.getElementById("err").innerHTML = "Invalid Email!";
        }
        
=======
            Email.send({
                    Host: "smtp.gmail.com",
                    Username: "epillPod2018@gmail.com",
                    Password: "dbswepzodchmjvcc",
                    To: reciver,
                    From: "epillPod2018@gmail.com",
                    Subject: description,
                    Body: "<html><h2>My Favourite Food List from Home Chef</h2><img src='../../Assets/img/cupcakes.jpg'><h2 >Cream Cakes</h2><span>No.6, Marine Drive, Colpetty</span><br><img src='../../Assets/img/kottu.jpg'><h2>Kottu Kottu</h2><span>No.4, W A Mawatha, Wellawatte</span></html>",
                    Attachments: [{
                        name: "favourites.jpg",
                        path: "https://image.shutterstock.com/image-photo/large-group-junk-food-one-600w-232493077.jpg",

                    }]
                })
                .then(function(message) {
                    //  var message = "Done"
                    console.log(message)
                });
        } else {
            flag = false;
            document.getElementById("add-popup-success").style.display = "none";
            document.getElementById("err").innerHTML = "Invalid Email!";

        }
>>>>>>> ba89c02 (veder page)


    }

    function amend(val) {
        var x = JSON.parse(localStorage.getItem("favItems"));
        var y = x - 1;
        localStorage.setItem('favItems', JSON.stringify(y));

        var favs = JSON.parse(localStorage.getItem("favVendors"));
        favs[String(val)] = false;
        localStorage.setItem('favVendors', JSON.stringify(favs));

        document.getElementById(`item${val}`).style.display = "none";
        document.getElementById(`item${val}${val}`).style.display = "none";

        if (y == 0) {
            document.getElementById("empty").style.display = "block";
        }

    }






    $(document).on("pageinit", function() {
        $("#addItem-popup").on({
            popupafterclose: function() {
                if (buttonClick) {
                    setTimeout(function() {
                        $("#add-popup-success").popup("open", {
                            positionTo: "#addItem-popup"
                        })
                    }, 100);
                    buttonClick = false;
                } else {
                    console.log(buttonClick);
                }
            }
        });
    });

    $(document).ready(function() {
        $("#submits").click(function() {
            if (flag) {
                buttonClick = true;
                $("#addItem-popup").popup("close");
            }
        });
    });
</script>



</html>